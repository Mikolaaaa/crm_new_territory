{% extends "base_generic.html" %}

{% block content %}
<h1>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h1>
{% load widget_tweaks %}

<h4><a href="feedback-add">–û—Å—Ç–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å</a></h4>

{% if data_list %}

<div class="container-fluid">  
    
    <form class="form-horizontal" action="" method="get">
        <div class="row">
            <div class="col-lg-5">
                <div class="form-group">
                    <label for="status" class="control-label">–°—Ç–∞—Ç—É—Å: </label>
                    <div name="status">
                        {% render_field data_filter.form.status class="form-control" %}
                    </div>
                </div>
                <div class="form-group">
                    <div name="type_feedback">
                        {% render_field data_filter.form.type_feedback class="form-control" %}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-lg-1">
                        <input type="submit" value="–ü—Ä–∏–º–µ–Ω–∏—Ç—å" class="btn btn-primary">
                    </div>
                </div>
            </div>
        </div>
    </form>
    
    <div class="row">
        <table  class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ê–≤—Ç–æ—Ä</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–¢–∏–ø</th>
                    <th>üëç</th>
                    <th>üëé</th>
                    <th>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</th>
                    <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for object in data_list %}
                {% if not user.is_staff %}
                    <tr>
                {% else %}
                    <tr onclick="document.location = 'feedback-update/{{ object.id }}';">
                {% endif %}
                    <td>{{ object.id }}</td>
                    <td>{{ object.datatime_feedback|date:"d.m.Y / H:i" }}</td>
                    <td>{{ object.author }}</td>
                    {% if object.status == 1 or object.status == 2 %}
                        <td class="text-primary"><b>{{ object.get_status_display }}</b></td>
                    {% elif object.status == 3 %}
                        <td class="text-warning"><b>{{ object.get_status_display }}</b></td>
                    {% elif object.status == 4 %}
                        <td class="text-success"><b>{{ object.get_status_display }}</b></td>
                    {% elif object.status == 5 %}
                        <td class="text-danger"><b>{{ object.get_status_display }}</b></td>
                    {% else %}
                        <td><b>{{ object.get_status_display }}</b></td>
                    {% endif %}
                    <td>{{ object.get_type_feedback_display }}</td>
                    <td><a href="update-like-dislike-feedback/{{ object.id }}/0">{{ object.like }}</a></td>
                    <td><a href="update-like-dislike-feedback/{{ object.id }}/1">{{ object.dislike }}</a></td>
                    <td>{{ object.feedback }}</td>
                    <td>{{ object.comment }}</td>
                    <td>
                        {% if object.status > 1 %}
                        <!-- –¢–æ –Ω–∏ —á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –ø—Ä–æ—Å—Ç–æ –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ –Ω–µ–ª—å–∑—è, —Ç–∞–∫ —á—Ç–æ –≤–æ—Ç —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ -->
                        {% else %}
                            {% if  not user == object.author %}
                            <!-- –¢–æ –Ω–∏ —á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –ø—Ä–æ—Å—Ç–æ –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ –Ω–µ–ª—å–∑—è, —Ç–∞–∫ —á—Ç–æ –≤–æ—Ç —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ -->
                            {% else %}
                            <form method="post" action="/crm/feedback-delete/{{object.id}}">
                            {% csrf_token %}
                                <input type="submit" value="–£–¥–∞–ª–∏—Ç—å" class="btn btn-danger">
                            </form>
                            {% endif %}
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% else %}
    <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö.</p>
{% endif %}

{% endblock %}